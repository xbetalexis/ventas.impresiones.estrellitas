<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IMPRESIONES ESTRELLITAS</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#ffd6e8,#d6f0ff);
}

h1{
    text-align:center;
    padding:20px;
    margin:0;
    background:linear-gradient(90deg,#ff9ecb,#9ed8ff);
    color:white;
    letter-spacing:2px;
}

.top{
    padding:15px;
    text-align:center;
}

input[type="month"]{
    padding:8px;
    border-radius:8px;
    border:1px solid #ffd1e6;
}

.grid{
    display:grid;
    grid-template-columns:repeat(2,1fr);
    gap:15px;
    padding:15px;
}

.day{
    background:white;
    border-radius:15px;
    padding:10px;
    box-shadow:0 5px 15px rgba(0,0,0,0.08);
}

.day h2{
    margin:0;
    color:#ff7eb9;
    font-size:16px;
}

.fecha{
    font-size:13px;
    color:#777;
    margin-bottom:5px;
}

textarea{
    width:100%;
    height:60px;
    resize:none;
    border:1px solid #ffd1e6;
    border-radius:8px;
    padding:5px;
    margin-bottom:5px;
}

input[type="number"]{
    width:100%;
    padding:6px;
    border-radius:8px;
    border:1px solid #ffd1e6;
    margin-bottom:5px;
}

button{
    width:100%;
    padding:6px;
    border:none;
    border-radius:8px;
    font-weight:bold;
    cursor:pointer;
    margin-bottom:5px;
}

.btn-guardar{
    background:linear-gradient(90deg,#ff9ecb,#9ed8ff);
    color:white;
}

.btn-borrar{
    background:#ff6b6b;
    color:white;
}

.total-box{
    grid-column:span 2;
    background:linear-gradient(90deg,#ffd6e8,#d6f0ff);
    padding:15px;
    border-radius:15px;
    text-align:center;
    font-weight:bold;
    font-size:18px;
}

@media(max-width:600px){
    .grid{
        grid-template-columns:1fr;
    }
    .total-box{
        grid-column:span 1;
    }
}
</style>
</head>
<body>

<h1>ðŸŒ¸ IMPRESIONES ESTRELLITAS ðŸ©µ</h1>

<div class="top">
Seleccionar Mes:
<input type="month" id="mesSelector">
</div>

<div class="grid" id="planner"></div>

<div class="total-box">
Total del Mes: $ <span id="totalMes">0</span> ðŸŒŸ
</div>

<script>
const diasSemana=["Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado","Domingo"];
const planner=document.getElementById("planner");
const mesSelector=document.getElementById("mesSelector");
let datos=JSON.parse(localStorage.getItem("plannerEstrellitas"))||{};

mesSelector.addEventListener("change",crearSemana);

function crearSemana(){
    planner.innerHTML="";
    const mes=mesSelector.value;
    if(!mes) return;

    const [year,month]=mes.split("-");
    let fecha=new Date(year,month-1,1);
    let total=0;

    for(let i=0;i<7;i++){
        const fechaTexto=fecha.toISOString().split("T")[0];
        const clave=fechaTexto;

        const guardado=datos[clave]||{detalle:"",importe:""};

        total+=Number(guardado.importe||0);

        planner.innerHTML+=`
        <div class="day">
            <h2>${diasSemana[i]}</h2>
            <div class="fecha">${fechaTexto}</div>
            <textarea id="detalle-${clave}" placeholder="Ventas del dÃ­a...">${guardado.detalle}</textarea>
            <input type="number" id="importe-${clave}" placeholder="Importe del dÃ­a" value="${guardado.importe}">
            <button class="btn-guardar" onclick="guardarDia('${clave}')">Guardar</button>
            <button class="btn-borrar" onclick="borrarDia('${clave}')">Borrar</button>
        </div>
        `;

        fecha.setDate(fecha.getDate()+1);
    }

    document.getElementById("totalMes").innerText=total;
}

function guardarDia(clave){
    const detalle=document.getElementById("detalle-"+clave).value;
    const importe=document.getElementById("importe-"+clave).value;

    datos[clave]={detalle,importe};
    localStorage.setItem("plannerEstrellitas",JSON.stringify(datos));
    crearSemana();
}

function borrarDia(clave){
    delete datos[clave];
    localStorage.setItem("plannerEstrellitas",JSON.stringify(datos));
    crearSemana();
}
</script>

</body>
</html>
