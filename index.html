<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IMPRESIONES ESTRELLITAS</title>

<style>
body{
    margin:0;
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(135deg,#ffd6e8,#d6f0ff);
    overflow-x:hidden;
}

/* HEADER */
h1{
    text-align:center;
    padding:20px;
    margin:0;
    background:linear-gradient(90deg,#ff9ecb,#9ed8ff);
    color:white;
    letter-spacing:2px;
}

/* Selector mes */
.top{
    text-align:center;
    padding:15px;
}

input[type="month"]{
    padding:8px;
    border-radius:8px;
    border:1px solid #ffd1e6;
}

/* Calendario */
.calendar{
    display:grid;
    grid-template-columns:repeat(7,1fr);
    gap:10px;
    padding:15px;
}

.day-name{
    text-align:center;
    font-weight:bold;
    color:#ff7eb9;
}

.day{
    background:white;
    border-radius:15px;
    padding:8px;
    min-height:150px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
    display:flex;
    flex-direction:column;
}

.day-number{
    font-size:14px;
    font-weight:bold;
    color:#777;
}

textarea{
    resize:none;
    border:1px solid #ffd1e6;
    border-radius:8px;
    padding:4px;
    font-size:12px;
    margin-top:4px;
    height:45px;
}

input[type="number"]{
    border:1px solid #ffd1e6;
    border-radius:8px;
    padding:4px;
    margin-top:4px;
    font-size:12px;
}

button{
    margin-top:4px;
    border:none;
    border-radius:8px;
    padding:4px;
    font-size:12px;
    font-weight:bold;
    cursor:pointer;
}

.btn-save{
    background:linear-gradient(90deg,#ff9ecb,#9ed8ff);
    color:white;
}

.btn-delete{
    background:#ff6b6b;
    color:white;
}

/* Total */
.total{
    margin:20px;
    text-align:center;
    font-size:20px;
    font-weight:bold;
    background:linear-gradient(90deg,#ffd6e8,#d6f0ff);
    padding:15px;
    border-radius:15px;
}

/* Responsive */
@media(max-width:900px){
    .calendar{
        grid-template-columns:repeat(2,1fr);
    }
}
</style>
</head>
<body>

<h1>ðŸŒ¸ IMPRESIONES ESTRELLITAS ðŸ©µ</h1>

<div class="top">
Seleccionar Mes:
<input type="month" id="mesSelector">
</div>

<div class="calendar" id="calendar"></div>

<div class="total">
Total del Mes: $ <span id="totalMes">0</span> ðŸŒŸ
</div>

<script>
const calendar=document.getElementById("calendar");
const mesSelector=document.getElementById("mesSelector");
let datos=JSON.parse(localStorage.getItem("calendarioEstrellitas"))||{};

const diasNombre=["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"];

function iniciar(){
    const hoy=new Date();
    mesSelector.value=hoy.toISOString().slice(0,7);
    crearCalendario();
}

mesSelector.addEventListener("change",crearCalendario);

function crearCalendario(){
    calendar.innerHTML="";
    const mes=mesSelector.value;
    if(!mes) return;

    const [year,month]=mes.split("-");
    const diasMes=new Date(year,month,0).getDate();
    const primerDia=new Date(year,month-1,1).getDay();
    let total=0;

    // Nombres dÃ­as
    diasNombre.forEach(d=>{
        calendar.innerHTML+=`<div class="day-name">${d}</div>`;
    });

    // Espacios vacÃ­os antes
    for(let i=0;i<primerDia;i++){
        calendar.innerHTML+=`<div></div>`;
    }

    // DÃ­as del mes
    for(let dia=1;dia<=diasMes;dia++){
        const fecha=new Date(year,month-1,dia);
        const clave=fecha.toISOString().split("T")[0];
        const guardado=datos[clave]||{detalle:"",importe:""};
        total+=Number(guardado.importe||0);

        calendar.innerHTML+=`
        <div class="day">
            <div class="day-number">${dia}</div>
            <textarea id="detalle-${clave}" placeholder="Ventas...">${guardado.detalle}</textarea>
            <input type="number" id="importe-${clave}" placeholder="$" value="${guardado.importe}">
            <button class="btn-save" onclick="guardar('${clave}')">Guardar</button>
            <button class="btn-delete" onclick="borrar('${clave}')">Borrar</button>
        </div>
        `;
    }

    document.getElementById("totalMes").innerText=total;
}

function guardar(clave){
    const detalle=document.getElementById("detalle-"+clave).value;
    const importe=document.getElementById("importe-"+clave).value;
    datos[clave]={detalle,importe};
    localStorage.setItem("calendarioEstrellitas",JSON.stringify(datos));
    crearCalendario();
}

function borrar(clave){
    delete datos[clave];
    localStorage.setItem("calendarioEstrellitas",JSON.stringify(datos));
    crearCalendario();
}

iniciar();

/* ESTRELLITAS FLOTANDO */
function crearEstrella(){
    const estrella=document.createElement("div");
    estrella.innerHTML="âœ¨";
    estrella.style.position="fixed";
    estrella.style.left=Math.random()*100+"vw";
    estrella.style.bottom="-20px";
    estrella.style.fontSize=(Math.random()*12+10)+"px";
    estrella.style.opacity="0.4";
    estrella.style.pointerEvents="none";
    estrella.style.transition="all 5s linear";
    document.body.appendChild(estrella);

    setTimeout(()=>{
        estrella.style.bottom="100vh";
        estrella.style.opacity="0";
    },100);

    setTimeout(()=>{
        estrella.remove();
    },5000);
}

setInterval(crearEstrella,2000);
</script>

</body>
</html>
